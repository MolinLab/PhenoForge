"0",""
"0","dir.create(""plots/plots_mean_indGenotypes_indIndices"", recursive = TRUE)"
"0",""
"0","path_plotaverage<-""plots/plots_mean_indGenotypes_indIndices/"""
"0",""
"0",""
"0","#naming the dfs in the list of HC indices"
"0","list_INDICES_splitBYName<-lapply(list_of_names, function(b){lapply(list_indices_Hc, function(q){"
"0","  list_index<-indices.to.list(q,""Hc_Plant"")"
"0","  genotype_list<-testing_fun(list_index,b)"
"0","  return(genotype_list)}"
"0",")})"
"0","names(list_INDICES_splitBYName)<-list_of_names"
"0",""
"0",""
"0","list_indices<-unlist(list_INDICES_splitBYName, recursive = FALSE)"
"0","list_mean_sd_INDICES<-list()"
"0","list_plots_ALL_HC<-list()"
"0","list_plots_IndicesANDmean<-list()"
"0",""
"0",""
"0","#calculating mean per df (one index, one genotype df all dates)"
"0","for(i in list_indices){"
"0","  list_mean_sd_INDICES[[length(list_mean_sd_INDICES)+1]]<-i%>%"
"0","    group_by(`Measuring Date`,Condition)%>%"
"0","    summarise(Mean=mean(value, na.rm=T),SD=sd(value, na.rm=T))%>%mutate(Name=i$Genotype[1])%>%"
"0","    mutate(Index=i$variable[1])}"
"0",""
"0","#plotting "
"0","for(i in list_indices){list_plots_ALL_HC[[length(list_plots_ALL_HC)+1]]<-"
"0","  ggplot(i, aes(x=as.Date(`Measuring Date`, format=""%Y-%m-%d""), y=value,group=`Plant Name`, "
"0","                color=Condition))+"
"0","  #geom_smooth(aes(color=Condition, group=Condition))+#kommt eventuell weg"
"0","  ylab(i$variable[1])+xlab(""Date"")+labs(title=i$Genotype[1])+"
"0","   geom_rect(aes(xmin=as.Date(stress_begin), xmax=as.Date(stress_end),ymin=-Inf,ymax=Inf),fill=""lightgrey"",alpha=0.02,color=""lightgrey"")+"
"0","  geom_point(size=0.5)+theme_bw(base_size = 5)+"
"0","  scale_color_manual(values = c(""Control""=""turquoise3"", "
"0","                                ""Drought stress""=""coral""))+"
"0","  theme(axis.text.x = element_text(angle=75, hjust=1.2),plot.title = element_text(size=16), "
"0","        legend.text=element_text(size=12),legend.title = element_text(size=13), "
"0","        axis.title.x = element_text(hjust=1),"
"0","        axis.text=element_text(size=13),axis.title=element_text(size=14))}"
"0",""
"0",""
"0","#adding the mean to plot"
"0","for(i in 1:length(list_mean_sd_INDICES)){"
"0","  list_plots_IndicesANDmean[[length(list_plots_IndicesANDmean)+1]]<-"
"0","    list_plots_ALL_HC[[i]]+geom_line(data=list_mean_sd_INDICES[[i]], "
"0","                                     aes(x=as.Date(`Measuring Date`, format=""%Y-%m-%d""),"
"0","                                         y=Mean,color=Condition, group=Condition))"
"0","  save_this<-paste0(path_plotaverage, paste0(list_mean_sd_INDICES[[i]]$Name[1], paste0(list_mean_sd_INDICES[[i]]$Index[1], "".png"")))"
"0","  if(file.exists(save_this)){"
"0","    "
"0","  } else {ggsave(file=paste0(path_plotaverage, paste0(list_mean_sd_INDICES[[i]]$Name[1], paste0(list_mean_sd_INDICES[[i]]$Index[1], "".png""))))}"
"0","  "
"0","  "
"0","  }"
"0",""
"0",""
